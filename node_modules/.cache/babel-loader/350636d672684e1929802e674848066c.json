{"ast":null,"code":"import _asyncToGenerator from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"A:\\\\Desktop\\\\Coding\\\\careerfoundry\\\\meet\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import'./App.css';import EventList from'./EventList';import CitySearch from'./CitySearch';import NumberOfEvents from'./NumberOfEvents';import{extractLocations,getEvents,checkToken,getAccessToken as _getAccessToken}from'./api';import'./nprogress.css';import WelcomeScreen from'./WelcomeScreen';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={events:[],locations:[],numberOfEvents:32,offlineText:'',showWelcomeScreen:undefined};_this.updateNumberOfEvents=function(numberOfEvents){_this.setState({numberOfEvents:numberOfEvents},_this.updateEvents(_this.state.locations,numberOfEvents));};_this.updateEvents=function(location,eventCount){console.log('update events token valid: ',_this.state.tokenCheck);var _this$state=_this.state,currentLocation=_this$state.currentLocation,numberOfEvents=_this$state.numberOfEvents;if(location){getEvents().then(function(response){var locationEvents=location===\"all\"?response.events:response.events.filter(function(event){return event.location===location;});var events=locationEvents.slice(0,numberOfEvents);return _this.setState({events:events,currentLocation:location,locations:response.locations});});}else{getEvents().then(function(response){var locationEvents=currentLocation===\"all\"?response.events:response.events.filter(function(event){return event.location===currentLocation;});var events=locationEvents.slice(0,eventCount);return _this.setState({events:events,numberOfEvents:eventCount,locations:response.locations});});}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var accessToken,isTokenValid,searchParams,code;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;accessToken=localStorage.getItem('access_token');_context.next=4;return checkToken(accessToken);case 4:if(!_context.sent.error){_context.next=8;break;}_context.t0=false;_context.next=9;break;case 8:_context.t0=true;case 9:isTokenValid=_context.t0;searchParams=new URLSearchParams(window.location.search);code=searchParams.get('code');this.setState({showWelcomeScreen:!(code||isTokenValid)});if((code||isTokenValid)&&this.mounted){getEvents().then(function(events){if(_this2.mounted){_this2.setState({events:events,locations:extractLocations(events)});}});}case 14:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentWillUnmount\",value:// async componentDidMount() {\n//   this.mounted = true;\n//   if (navigator.onLine && !window.location.href.startsWith('http://localhost')) {\n//     const accessToken = localStorage.getItem('access_token');\n//     const isTokenValid = (await checkToken(accessToken)).error ? false : true;\n//     const searchParams = new URLSearchParams(window.location.search);\n//     const code = searchParams.get(\"code\");\n//     if ((code || isTokenValid) && this.mounted) {\n//       getEvents().then((events) => {\n//         if (this.mounted) {\n//           this.setState({\n//             events,\n//             locations: extractLocations(events),\n//             warningText: ''\n//           });\n//         }\n//       });\n//     }\n//   } else {\n//     getEvents().then((events) => {\n//       if (this.mounted) {\n//         this.setState({\n//           events,\n//           locations: extractLocations(events),\n//           warningText: 'You are offline. The displayed event list may not be up to date.',\n//           showWelcomeScreen: false\n//         });\n//       }\n//     });\n//   }\n// };\nfunction componentWillUnmount(){this.mounted=false;}},{key:\"render\",value:function render(){if(this.state.showWelcomeScreen===undefined)return/*#__PURE__*/_jsx(\"div\",{className:\"App\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"MEET APP\"}),/*#__PURE__*/_jsx(CitySearch,{locations:this.state.locations,updateEvents:this.updateEvents}),/*#__PURE__*/_jsx(NumberOfEvents,{numberOfEvents:this.state.numberOfEvents,updateNumberOfEvents:this.updateNumberOfEvents}),/*#__PURE__*/_jsx(EventList,{events:this.state.events,numberOfEvents:this.state.numberOfEvents}),/*#__PURE__*/_jsx(WelcomeScreen,{showWelcomeScreen:this.state.showWelcomeScreen,getAccessToken:function getAccessToken(){_getAccessToken();}})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["A:/Desktop/Coding/careerfoundry/meet/src/App.js"],"names":["React","Component","EventList","CitySearch","NumberOfEvents","extractLocations","getEvents","checkToken","getAccessToken","WelcomeScreen","App","state","events","locations","numberOfEvents","offlineText","showWelcomeScreen","undefined","updateNumberOfEvents","setState","updateEvents","location","eventCount","console","log","tokenCheck","currentLocation","then","response","locationEvents","filter","event","slice","mounted","accessToken","localStorage","getItem","error","isTokenValid","searchParams","URLSearchParams","window","search","code","get"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport EventList from './EventList';\nimport CitySearch from './CitySearch';\nimport NumberOfEvents from './NumberOfEvents';\nimport { extractLocations, getEvents, checkToken, getAccessToken } from './api';\nimport './nprogress.css';\nimport WelcomeScreen from './WelcomeScreen';\n\nclass App extends Component {\n\n  state = {\n    events: [],\n    locations: [],\n    numberOfEvents: 32,\n    offlineText: '',\n    showWelcomeScreen: undefined\n  };\n\n  async componentDidMount() {\n    this.mounted = true;\n    const accessToken = localStorage.getItem('access_token');\n    const isTokenValid = (await checkToken(accessToken)).error ? false : true;\n    const searchParams = new URLSearchParams(window.location.search);\n    const code = searchParams.get('code');\n    this.setState({ showWelcomeScreen: !(code || isTokenValid ) });\n    if ((code || isTokenValid) && this.mounted) {\n      getEvents().then((events) => {\n        if (this.mounted) {\n          this.setState({ events, locations: extractLocations(events) });\n        }\n      });\n    }  \n  };\n\n  // async componentDidMount() {\n  //   this.mounted = true;\n  //   if (navigator.onLine && !window.location.href.startsWith('http://localhost')) {\n  //     const accessToken = localStorage.getItem('access_token');\n  //     const isTokenValid = (await checkToken(accessToken)).error ? false : true;\n  //     const searchParams = new URLSearchParams(window.location.search);\n  //     const code = searchParams.get(\"code\");\n  //     if ((code || isTokenValid) && this.mounted) {\n  //       getEvents().then((events) => {\n  //         if (this.mounted) {\n  //           this.setState({\n  //             events,\n  //             locations: extractLocations(events),\n  //             warningText: ''\n  //           });\n  //         }\n  //       });\n  //     }\n  //   } else {\n  //     getEvents().then((events) => {\n  //       if (this.mounted) {\n  //         this.setState({\n  //           events,\n  //           locations: extractLocations(events),\n  //           warningText: 'You are offline. The displayed event list may not be up to date.',\n  //           showWelcomeScreen: false\n  //         });\n  //       }\n  //     });\n  //   }\n  // };\n\n  componentWillUnmount() {\n    this.mounted = false;\n  };\n\n  updateNumberOfEvents = (numberOfEvents) => {\n    this.setState(\n      { \n        numberOfEvents \n      }, \n      this.updateEvents(this.state.locations, numberOfEvents)\n    );\n  };\n\n  // updateEvents = (location, eventCount) => {\n  //   getEvents().then((events) => {\n  //     const locationEvents = (location === 'all') ?\n  //       events : \n  //       events.filter((event) => event.location === location);\n  //     if (this.mounted) {\n  //       this.setState({\n  //         events: locationEvents.slice(0, this.state.numberOfEvents),\n  //         numberOfEvents: eventCount\n  //       });\n  //     }\n  //   });\n  // };\n\n  updateEvents = (location, eventCount) => {\n    console.log('update events token valid: ', this.state.tokenCheck)\n    const { currentLocation, numberOfEvents } = this.state;\n    if (location) {\n      getEvents().then((response) => {\n        const locationEvents =\n          location === \"all\"\n            ? response.events\n            : response.events.filter((event) => event.location === location);\n        const events = locationEvents.slice(0, numberOfEvents);\n        return this.setState({\n          events: events,\n          currentLocation: location,\n          locations: response.locations,\n        });\n      });\n    } else {\n      getEvents().then((response) => {\n        const locationEvents =\n          currentLocation === \"all\"\n            ? response.events\n            : response.events.filter(\n                (event) => event.location === currentLocation\n              );\n        const events = locationEvents.slice(0, eventCount);\n        return this.setState({\n          events: events,\n          numberOfEvents: eventCount,\n          locations: response.locations,\n        });\n      });\n    }\n  };\n  \n  render() {\n\n    if (this.state.showWelcomeScreen === undefined) return <div className='App' />\n\n    return (\n      <div className='App'>\n        <h1>MEET APP</h1>\n        <CitySearch \n          locations={this.state.locations} \n          updateEvents={this.updateEvents} \n        />\n        <NumberOfEvents \n          numberOfEvents={this.state.numberOfEvents} \n          updateNumberOfEvents={this.updateNumberOfEvents} \n        />\n        <EventList \n          events={this.state.events} \n          numberOfEvents={this.state.numberOfEvents}\n        />\n        <WelcomeScreen \n        showWelcomeScreen={this.state.showWelcomeScreen}\n        getAccessToken={() => { getAccessToken() }} \n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}