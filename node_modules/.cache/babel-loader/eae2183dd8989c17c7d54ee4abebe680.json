{"ast":null,"code":"import _asyncToGenerator from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"A:\\\\Desktop\\\\Coding\\\\careerfoundry\\\\meet\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import'./App.css';import EventList from'./EventList';import CitySearch from'./CitySearch';import NumberOfEvents from'./NumberOfEvents';import{extractLocations,getEvents}from'./api';import'./nprogress.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={events:[],locations:[],numberOfEvents:32,offlineText:''};_this.updateNumberOfEvents=function(numberOfEvents){_this.setState({numberOfEvents:numberOfEvents},_this.updateEvents(_this.state.locations,numberOfEvents));};_this.updateEvents=function(location,eventCount){getEvents().then(function(events){var locationEvents=location==='all'?events:events.filter(function(event){return event.location===location;});if(_this.mounted){_this.setState({events:locationEvents.slice(0,_this.state.numberOfEvents),numberOfEvents:eventCount});}});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:// componentDidMount() {\n//   this.mounted = true;\n//   getEvents().then((events) => {\n//     if (this.mounted) {\n//       this.setState({ events, locations: extractLocations(events) });\n//     }\n//   });\n// };\nfunction(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var accessToken,isTokenValid,searchParams,code;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;if(!(navigator.onLine&&!window.location.href.startsWith('http://localhost'))){_context.next=16;break;}accessToken=localStorage.getItem('access_token');_context.next=5;return checkToken(accessToken);case 5:if(!_context.sent.error){_context.next=9;break;}_context.t0=false;_context.next=10;break;case 9:_context.t0=true;case 10:isTokenValid=_context.t0;searchParams=new URLSearchParams(window.location.search);code=searchParams.get(\"code\");if((code||isTokenValid)&&this.mounted){getEvents().then(function(events){if(_this2.mounted){_this2.setState({events:events,locations:extractLocations(events),warningText:''});}});}_context.next=17;break;case 16:getEvents().then(function(events){if(_this2.mounted){_this2.setState({events:events,locations:extractLocations(events),warningText:'You are offline. The displayed event list may not be up to date.',showWelcomeScreen:false});}});case 17:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.mounted=false;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"MEET APP\"}),/*#__PURE__*/_jsx(CitySearch,{locations:this.state.locations,updateEvents:this.updateEvents}),/*#__PURE__*/_jsx(NumberOfEvents,{numberOfEvents:this.state.numberOfEvents,updateNumberOfEvents:this.updateNumberOfEvents}),/*#__PURE__*/_jsx(EventList,{events:this.state.events,numberOfEvents:this.state.numberOfEvents})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["A:/Desktop/Coding/careerfoundry/meet/src/App.js"],"names":["React","Component","EventList","CitySearch","NumberOfEvents","extractLocations","getEvents","App","state","events","locations","numberOfEvents","offlineText","updateNumberOfEvents","setState","updateEvents","location","eventCount","then","locationEvents","filter","event","mounted","slice","navigator","onLine","window","href","startsWith","accessToken","localStorage","getItem","checkToken","error","isTokenValid","searchParams","URLSearchParams","search","code","get","warningText","showWelcomeScreen"],"mappings":"wtBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,gBAAT,CAA2BC,SAA3B,KAA4C,OAA5C,CACA,MAAO,iBAAP,C,2FAEMC,CAAAA,G,+SAEJC,K,CAAQ,CACNC,MAAM,CAAE,EADF,CAENC,SAAS,CAAE,EAFL,CAGNC,cAAc,CAAE,EAHV,CAINC,WAAW,CAAE,EAJP,C,OAoDRC,oB,CAAuB,SAACF,cAAD,CAAoB,CACzC,MAAKG,QAAL,CACE,CACEH,cAAc,CAAdA,cADF,CADF,CAIE,MAAKI,YAAL,CAAkB,MAAKP,KAAL,CAAWE,SAA7B,CAAwCC,cAAxC,CAJF,EAMD,C,OAEDI,Y,CAAe,SAACC,QAAD,CAAWC,UAAX,CAA0B,CACvCX,SAAS,GAAGY,IAAZ,CAAiB,SAACT,MAAD,CAAY,CAC3B,GAAMU,CAAAA,cAAc,CAAIH,QAAQ,GAAK,KAAd,CACrBP,MADqB,CAErBA,MAAM,CAACW,MAAP,CAAc,SAACC,KAAD,QAAWA,CAAAA,KAAK,CAACL,QAAN,GAAmBA,QAA9B,EAAd,CAFF,CAGA,GAAI,MAAKM,OAAT,CAAkB,CAChB,MAAKR,QAAL,CAAc,CACZL,MAAM,CAAEU,cAAc,CAACI,KAAf,CAAqB,CAArB,CAAwB,MAAKf,KAAL,CAAWG,cAAnC,CADI,CAEZA,cAAc,CAAEM,UAFJ,CAAd,EAID,CACF,CAVD,EAWD,C,gEAlED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;0FAEA,kMACE,KAAKK,OAAL,CAAe,IAAf,CADF,KAEME,SAAS,CAACC,MAAV,EAAoB,CAACC,MAAM,CAACV,QAAP,CAAgBW,IAAhB,CAAqBC,UAArB,CAAgC,kBAAhC,CAF3B,2BAGUC,WAHV,CAGwBC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAHxB,uBAIgCC,CAAAA,UAAU,CAACH,WAAD,CAJ1C,0BAIyDI,KAJzD,qCAIiE,KAJjE,2CAIyE,IAJzE,SAIUC,YAJV,aAKUC,YALV,CAKyB,GAAIC,CAAAA,eAAJ,CAAoBV,MAAM,CAACV,QAAP,CAAgBqB,MAApC,CALzB,CAMUC,IANV,CAMiBH,YAAY,CAACI,GAAb,CAAiB,MAAjB,CANjB,CAOI,GAAI,CAACD,IAAI,EAAIJ,YAAT,GAA0B,KAAKZ,OAAnC,CAA4C,CAC1ChB,SAAS,GAAGY,IAAZ,CAAiB,SAACT,MAAD,CAAY,CAC3B,GAAI,MAAI,CAACa,OAAT,CAAkB,CAChB,MAAI,CAACR,QAAL,CAAc,CACZL,MAAM,CAANA,MADY,CAEZC,SAAS,CAAEL,gBAAgB,CAACI,MAAD,CAFf,CAGZ+B,WAAW,CAAE,EAHD,CAAd,EAKD,CACF,CARD,EASD,CAjBL,+BAmBIlC,SAAS,GAAGY,IAAZ,CAAiB,SAACT,MAAD,CAAY,CAC3B,GAAI,MAAI,CAACa,OAAT,CAAkB,CAChB,MAAI,CAACR,QAAL,CAAc,CACZL,MAAM,CAANA,MADY,CAEZC,SAAS,CAAEL,gBAAgB,CAACI,MAAD,CAFf,CAGZ+B,WAAW,CAAE,kEAHD,CAIZC,iBAAiB,CAAE,KAJP,CAAd,EAMD,CACF,CATD,EAnBJ,4D,iJAgCA,+BAAuB,CACrB,KAAKnB,OAAL,CAAe,KAAf,CACD,C,sBAyBD,iBAAS,CACP,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,gCADF,cAEE,KAAC,UAAD,EACE,SAAS,CAAE,KAAKd,KAAL,CAAWE,SADxB,CAEE,YAAY,CAAE,KAAKK,YAFrB,EAFF,cAME,KAAC,cAAD,EACE,cAAc,CAAE,KAAKP,KAAL,CAAWG,cAD7B,CAEE,oBAAoB,CAAE,KAAKE,oBAF7B,EANF,cAUE,KAAC,SAAD,EACE,MAAM,CAAE,KAAKL,KAAL,CAAWC,MADrB,CAEE,cAAc,CAAE,KAAKD,KAAL,CAAWG,cAF7B,EAVF,GADF,CAiBD,C,iBA/FeV,S,EAkGlB,cAAeM,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport EventList from './EventList';\nimport CitySearch from './CitySearch';\nimport NumberOfEvents from './NumberOfEvents';\nimport { extractLocations, getEvents } from './api';\nimport './nprogress.css';\n\nclass App extends Component {\n\n  state = {\n    events: [],\n    locations: [],\n    numberOfEvents: 32,\n    offlineText: ''\n  };\n\n  // componentDidMount() {\n  //   this.mounted = true;\n  //   getEvents().then((events) => {\n  //     if (this.mounted) {\n  //       this.setState({ events, locations: extractLocations(events) });\n  //     }\n  //   });\n  // };\n\n  async componentDidMount() {\n    this.mounted = true;\n    if (navigator.onLine && !window.location.href.startsWith('http://localhost')) {\n      const accessToken = localStorage.getItem('access_token');\n      const isTokenValid = (await checkToken(accessToken)).error ? false : true;\n      const searchParams = new URLSearchParams(window.location.search);\n      const code = searchParams.get(\"code\");\n      if ((code || isTokenValid) && this.mounted) {\n        getEvents().then((events) => {\n          if (this.mounted) {\n            this.setState({\n              events,\n              locations: extractLocations(events),\n              warningText: ''\n            });\n          }\n        });\n      }\n    } else {\n      getEvents().then((events) => {\n        if (this.mounted) {\n          this.setState({\n            events,\n            locations: extractLocations(events),\n            warningText: 'You are offline. The displayed event list may not be up to date.',\n            showWelcomeScreen: false\n          });\n        }\n      });\n    }\n  };\n\n  componentWillUnmount() {\n    this.mounted = false;\n  };\n\n  updateNumberOfEvents = (numberOfEvents) => {\n    this.setState(\n      { \n        numberOfEvents \n      }, \n      this.updateEvents(this.state.locations, numberOfEvents)\n    );\n  };\n\n  updateEvents = (location, eventCount) => {\n    getEvents().then((events) => {\n      const locationEvents = (location === 'all') ?\n        events : \n        events.filter((event) => event.location === location);\n      if (this.mounted) {\n        this.setState({\n          events: locationEvents.slice(0, this.state.numberOfEvents),\n          numberOfEvents: eventCount\n        });\n      }\n    });\n  };\n  \n  render() {\n    return (\n      <div className='App'>\n        <h1>MEET APP</h1>\n        <CitySearch \n          locations={this.state.locations} \n          updateEvents={this.updateEvents} \n        />\n        <NumberOfEvents \n          numberOfEvents={this.state.numberOfEvents} \n          updateNumberOfEvents={this.updateNumberOfEvents} \n        />\n        <EventList \n          events={this.state.events} \n          numberOfEvents={this.state.numberOfEvents}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}