{"ast":null,"code":"import _asyncToGenerator from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"A:/Desktop/Coding/careerfoundry/meet/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"A:\\\\Desktop\\\\Coding\\\\careerfoundry\\\\meet\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import'./App.css';import EventList from'./EventList';import CitySearch from'./CitySearch';import NumberOfEvents from'./NumberOfEvents';import{extractLocations,getEvents,checkToken,getAccessToken}from'./api';import'./nprogress.css';import WelcomeScreen from'./WelcomeScreen';import{ScatterChart,Scatter,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer}from'recharts';import EventGenre from'./EventGenre';import{WarningAlert}from'./Alert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={events:[],locations:[],numberOfEvents:32,currentLocation:'all',warningText:'',showWelcomeScreen:undefined};_this.updateNumberOfEvents=function(eventCount){console.log(eventCount+' - Event Count 1 FIRST');_this.setState({numberOfEvents:eventCount},_this.updateEvents(_this.state.currentLocations,eventCount),console.log('eventCount2: '+eventCount));};_this.updateEvents=function(location,eventCount){getEvents().then(function(events){var locationEvents=location==='all'?events:events.filter(function(event){return event.location===location;});if(_this.mounted){_this.setState({events:locationEvents.slice(0,_this.state.numberOfEvents),numberOfEvents:eventCount});}});};_this.getData=function(){var _this$state=_this.state,locations=_this$state.locations,events=_this$state.events;var data=locations.map(function(location){var number=events.filter(function(event){return event.location===location;}).length;var city=location.split(', ').shift();return{city:city,number:number};});return data;};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var accessToken,isTokenValid,searchParams,code;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;accessToken=localStorage.getItem('access_token');_context.next=4;return checkToken(accessToken);case 4:if(!_context.sent.error){_context.next=8;break;}_context.t0=false;_context.next=9;break;case 8:_context.t0=true;case 9:isTokenValid=_context.t0;searchParams=new URLSearchParams(window.location.search);code=searchParams.get('code');this.setState({showWelcomeScreen:!(code||isTokenValid)});if((code||isTokenValid)&&this.mounted){getEvents().then(function(events){if(_this2.mounted){_this2.setState({events:events,locations:extractLocations(events)});}});}case 14:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentWillUnmount\",value:// async componentDidMount() {\n//   this.mounted = true;\n//   if (navigator.onLine && !window.location.href.startsWith('http://localhost')) {\n//     const accessToken = localStorage.getItem('access_token');\n//     const isTokenValid = (await checkToken(accessToken)).error ? false : true;\n//     const searchParams = new URLSearchParams(window.location.search);\n//     const code = searchParams.get(\"code\");\n//     this.setState({ showWelcomeScreen: !(code || isTokenValid) });\n//     if ((code || isTokenValid) && this.mounted) {\n//       getEvents().then((events) => {\n//         if (this.mounted) {\n//           this.setState({\n//             events,\n//             locations: extractLocations(events),\n//             warningText: ''\n//           });\n//         }\n//       });\n//     }\n//   } else {\n//     getEvents().then((events) => {\n//       if (this.mounted) {\n//         this.setState({\n//           events,\n//           locations: extractLocations(events),\n//           warningText: 'You are offline. The displayed event list may not be up to date.',\n//           showWelcomeScreen: false\n//         });\n//       }\n//     });\n//   }\n// }\nfunction componentWillUnmount(){this.mounted=false;}},{key:\"render\",value:function render(){var events=this.state.events;if(this.state.showWelcomeScreen===undefined)return/*#__PURE__*/_jsx(\"div\",{className:\"App\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"MEET APP\"}),/*#__PURE__*/_jsx(CitySearch,{locations:this.state.locations,updateEvents:this.updateEvents}),/*#__PURE__*/_jsx(NumberOfEvents,{numberOfEvents:this.state.numberOfEvents,updateNumberOfEvents:this.updateNumberOfEvents}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-vis-wrapper\",children:[/*#__PURE__*/_jsx(EventGenre,{events:events}),/*#__PURE__*/_jsx(ResponsiveContainer,{height:400,children:/*#__PURE__*/_jsxs(ScatterChart,{margin:{top:20,right:20,bottom:20,left:20},children:[/*#__PURE__*/_jsx(CartesianGrid,{}),/*#__PURE__*/_jsx(XAxis,{type:\"category\",dataKey:\"city\",name:\"city\"}),/*#__PURE__*/_jsx(YAxis,{type:\"number\",dataKey:\"number\",name:\"number of events\",allowDecimals:false}),/*#__PURE__*/_jsx(Tooltip,{cursor:{strokeDasharray:'3 3'}}),/*#__PURE__*/_jsx(Scatter,{data:this.getData(),fill:\"#8884d8\"})]})})]}),/*#__PURE__*/_jsx(EventList,{events:this.state.events,numberOfEvents:this.state.numberOfEvents})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["A:/Desktop/Coding/careerfoundry/meet/src/App.js"],"names":["React","Component","EventList","CitySearch","NumberOfEvents","extractLocations","getEvents","checkToken","getAccessToken","WelcomeScreen","ScatterChart","Scatter","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","EventGenre","WarningAlert","App","state","events","locations","numberOfEvents","currentLocation","warningText","showWelcomeScreen","undefined","updateNumberOfEvents","eventCount","console","log","setState","updateEvents","currentLocations","location","then","locationEvents","filter","event","mounted","slice","getData","data","map","number","length","city","split","shift","accessToken","localStorage","getItem","error","isTokenValid","searchParams","URLSearchParams","window","search","code","get","top","right","bottom","left","strokeDasharray"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.css';\r\nimport EventList from './EventList';\r\nimport CitySearch from './CitySearch';\r\nimport NumberOfEvents from './NumberOfEvents';\r\nimport { extractLocations, getEvents, checkToken, getAccessToken } from './api';\r\nimport './nprogress.css';\r\nimport WelcomeScreen from './WelcomeScreen';\r\nimport { ScatterChart, Scatter, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport EventGenre from './EventGenre';\r\nimport { WarningAlert } from './Alert';\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    events: [],\r\n    locations: [],\r\n    numberOfEvents: 32,\r\n    currentLocation: 'all',\r\n    warningText: '',\r\n    showWelcomeScreen: undefined\r\n  };\r\n\r\n  updateNumberOfEvents = (eventCount) => {\r\n    console.log(eventCount + ' - Event Count 1 FIRST')\r\n    this.setState(\r\n      { \r\n        numberOfEvents: eventCount,\r\n\r\n      }, \r\n      this.updateEvents(this.state.currentLocations, eventCount),\r\n      \r\n      console.log('eventCount2: ' + eventCount)\r\n    );\r\n  };\r\n\r\n  async componentDidMount() {\r\n    this.mounted = true;\r\n    const accessToken = localStorage.getItem('access_token');\r\n    const isTokenValid = (await checkToken(accessToken)).error ? false : true;\r\n    const searchParams = new URLSearchParams(window.location.search);\r\n    const code = searchParams.get('code');\r\n    this.setState({ showWelcomeScreen: !(code || isTokenValid ) });\r\n    if ((code || isTokenValid) && this.mounted) {\r\n      getEvents().then((events) => {\r\n        if (this.mounted) {\r\n          this.setState({ events, locations: extractLocations(events) });\r\n        }\r\n      });\r\n    }  \r\n  };\r\n\r\n  // async componentDidMount() {\r\n  //   this.mounted = true;\r\n  //   if (navigator.onLine && !window.location.href.startsWith('http://localhost')) {\r\n  //     const accessToken = localStorage.getItem('access_token');\r\n  //     const isTokenValid = (await checkToken(accessToken)).error ? false : true;\r\n  //     const searchParams = new URLSearchParams(window.location.search);\r\n  //     const code = searchParams.get(\"code\");\r\n  //     this.setState({ showWelcomeScreen: !(code || isTokenValid) });\r\n  //     if ((code || isTokenValid) && this.mounted) {\r\n  //       getEvents().then((events) => {\r\n  //         if (this.mounted) {\r\n  //           this.setState({\r\n  //             events,\r\n  //             locations: extractLocations(events),\r\n  //             warningText: ''\r\n  //           });\r\n  //         }\r\n  //       });\r\n  //     }\r\n  //   } else {\r\n  //     getEvents().then((events) => {\r\n  //       if (this.mounted) {\r\n  //         this.setState({\r\n  //           events,\r\n  //           locations: extractLocations(events),\r\n  //           warningText: 'You are offline. The displayed event list may not be up to date.',\r\n  //           showWelcomeScreen: false\r\n  //         });\r\n  //       }\r\n  //     });\r\n  //   }\r\n  // }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  };\r\n\r\n  updateEvents = (location, eventCount) => {\r\n    getEvents().then((events) => {\r\n      const locationEvents = (location === 'all') ?\r\n        events : \r\n        events.filter((event) => event.location === location);\r\n      if (this.mounted) {\r\n        this.setState({\r\n          events: locationEvents.slice(0, this.state.numberOfEvents),\r\n          numberOfEvents: eventCount\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  getData = () => {\r\n    const { locations, events } = this.state;\r\n    const data = locations.map((location) => {\r\n      const number = events.filter((event) => event.location === location).length\r\n      const city = location.split(', ').shift()\r\n      return { city, number };\r\n    })\r\n    return data;\r\n  };\r\n  \r\n  render() {\r\n    \r\n    const { events } = this.state;\r\n\r\n    if (this.state.showWelcomeScreen === undefined) return <div className='App' />\r\n\r\n    return (\r\n      <div className='App'>\r\n        <h1>MEET APP</h1>\r\n\r\n        <CitySearch \r\n          locations={this.state.locations} \r\n          updateEvents={this.updateEvents} \r\n        />\r\n\r\n        <NumberOfEvents \r\n          numberOfEvents={this.state.numberOfEvents} \r\n          updateNumberOfEvents={this.updateNumberOfEvents} \r\n        />\r\n\r\n        <div className='data-vis-wrapper'>\r\n\r\n        <EventGenre events={events} />\r\n\r\n        <ResponsiveContainer height={400} >\r\n          <ScatterChart\r\n            margin={{\r\n              top: 20, right: 20, bottom: 20, left: 20,\r\n            }}\r\n          >\r\n            <CartesianGrid />\r\n            <XAxis type=\"category\" dataKey=\"city\" name=\"city\" />\r\n            <YAxis type=\"number\" dataKey=\"number\" name=\"number of events\" allowDecimals={false} />\r\n            <Tooltip cursor={{ strokeDasharray: '3 3' }} />\r\n            <Scatter data={this.getData()} fill=\"#8884d8\" />\r\n          </ScatterChart>\r\n        </ResponsiveContainer>\r\n\r\n        </div>\r\n                \r\n        <EventList \r\n          events={this.state.events} \r\n          numberOfEvents={this.state.numberOfEvents}\r\n        />     \r\n\r\n        {/* <WelcomeScreen \r\n        showWelcomeScreen={this.state.showWelcomeScreen}\r\n        getAccessToken={() => { getAccessToken() }} \r\n        /> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}